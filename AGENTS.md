# Инструкции AGENTS для `nabludatel-platform`

Этот репозиторий — **монорепозиторий**, содержащий несколько пакетов и приложений, построенных на Node.js/TypeScript. Все части проекта взаимосвязаны и управляются централизованно.

---

## Структура Проекта

*   **`admin/`**: React-панель администратора, собранная с помощью Vite. Здесь находится интерфейс для управления всеми данными платформы.
*   **`backend/`**: Сервер API на Express.js, который предоставляет данные и бизнес-логику. Хранит основную информацию в JSON-файлах (`db/`) и управляет доступом через JWT.
*   **`packages/`**: "Мастерская" с переиспользуемыми частями:
    *   **`core/`**: Содержит общие утилиты, типы TypeScript и конфигурацию проекта (`project.ts`), а также `git-rev-sync` для получения метаданных.
    *   **`ui/`**: Библиотека переиспользуемых React-компонентов (кнопки, шапки, форматирование цен), которые используются в админке.
*   **`scripts/`**: Вспомогательные скрипты для разработки (например, вывод баннеров при старте/остановке сервера).
*   **Корневые файлы:**
    *   `package.json`, `pnpm-workspace.yaml`, `turbo.json`: Основные файлы конфигурации для управления монорепозиторием и зависимостями.
    *   `tsconfig.json`: Главный файл конфигурации TypeScript.
    *   `.gitignore`: Правила игнорирования файлов для Git.
    *   `README.md`: Инструкция по запуску и общая информация о корневом проекте.
    *   `PROJECT_GUIDE.md`: (Этот файл) Детальная документация по структуре и назначению всех ключевых файлов.

---

## Как Это Работает (Обзор)

1.  **Backend (`backend/`)**:
    *   Запускается Express-сервер на порту `3001`.
    *   Хранит данные в JSON-файлах (`db/`).
    *   Предоставляет REST API (`/api/*`) для админки и клиентских сайтов.
    *   Использует JWT для аутентификации (middleware в `backend/middlewares/`).
    *   Загруженные файлы сохраняются в `backend/uploads/` и отдаются как статика.

2.  **Admin (`admin/`)**:
    *   SPA на Vite + React + TypeScript.
    *   Взаимодействует с бэкендом через API-запросы (`fetch`, `axios`).
    *   Использует `react-router-dom` для навигации.
    *   Стилизуется с помощью Tailwind CSS.
    *   Защита маршрутов реализована через `ProtectedRoute` и `Layout` с проверкой токена.
    *   Использует `cn` (из `@/lib/utils`) для гибкого управления классами.

3.  **UI-пакет (`packages/ui`)**:
    *   Содержит переиспользуемые React-компоненты (шапки, карточки, форматер цен), созданные с использованием `shadcn/ui`.
    *   Используется другими приложениями.

4.  **Core-утилиты (`packages/core`)**:
    *   Предоставляет общие утилиты и метаданные проекта (`slugify`, `project.ts` с git-информацией).

---

## Разработка и Запуск

1.  **Установка зависимостей:**
    *   Перейдите в корневую папку проекта (`cd nabudatel-platform`).
    *   Выполните команду: `pnpm install`

2.  **Запуск всего проекта:**
    *   Из корневой папки выполните: `pnpm dev`
    *   Эта команда запускает все части проекта (admin, backend) через `Turborepo`.

3.  **Важные скрипты:**
    *   `backend/index.ts`: Основной файл запуска сервера бэкенда.
    *   `admin/src/main.tsx`: Точка входа в админ-панель.
    *   `scripts/dev.ts`: Скрипт для запуска всех компонентов одновременно.

---

## Документация и Качество Кода

*   **`PROJECT_GUIDE.md`**: Это главный документ, который вы сейчас читаете! Он содержит детальное описание всех файлов и их назначения.
*   **ESLint (`eslint.config.js`)**: Настроен для проверки кода на ошибки и соответствие стилю.
*   **TypeScript (`tsconfig.*.json`)**: Обеспечивает строгую типизацию и помогает отлавливать ошибки на этапе разработки.
*   **Тестирование:** В настоящее время автоматические тесты отсутствуют. При внесении изменений убедитесь, что команда `pnpm build` (или `tsc` в каждом пакете) не вызывает новых ошибок TypeScript.

---

**Проект "Наблюдатель Платформ" разобран, почищен и задокументирован!**