// ============================================================================
// packages/core/config/project.ts - МЕТАДАННЫЕ ПРОЕКТА ("СЕРТИФИКАТ КАЧЕСТВА")
// ============================================================================
// Этот файл собирает важную информацию о нашем проекте (движке core),
// такую как версия, автор, коммит и дата сборки. Эти данные могут быть
// полезны для отображения в админке, логах или для отладки.
// ============================================================================

// --- 1. ИМПОРТЫ ---
import path from "path";
// Импортируем библиотеку `git-rev-sync` для получения информации из Git-репозитория.
// ❗️ Важно: Убедитесь, что эта библиотека установлена (`pnpm install git-rev-sync` в папке `core`).
import git from "git-rev-sync";

// --- 2. КОНФИГУРАЦИЯ ПРОЕКТА (МЕТАДАННЫЕ) ---
export const project = {
  // Название нашего "движка" или "ядра" проекта.
  name: "nabludatel.core",
  // Текущая версия этого ядра.
  version: "0.1.0",

  // --- Данные из Git ---
  // Получаем информацию непосредственно из Git-репозитория.
  // Это помогает всегда иметь актуальные сведения о текущей сборке.
  author: git.author(), // Автор последнего коммита.
  commit: git.short(), // Короткий хеш коммита.
  branch: git.branch(), // Название текущей ветки.
  lastCommit: git.date(), // Дата коммита (в виде строки, нужно будет парсить).

  // --- ДИНАМИЧЕСКИЕ ДАННЫЕ ---
  // Геттер `buildMeta` - это как "датчик", который всегда показывает
  // свежую информацию о текущей сборке. Он вычисляется каждый раз,
  // когда мы обращаемся к `project.buildMeta`.
  get buildMeta() {
    return {
      // Время, когда код был скомпилирован (собран).
      builtAt: new Date().toISOString(),
      // Окружение, в котором собрана сборка (development, production).
      environment: process.env.NODE_ENV || "development",
    };
  },
};
